<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/online">
<head>
    <meta charset="utf-8"/>
    <title>Register | JF</title>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-maskmoney/3.0.2/jquery.maskMoney.min.js"></script>
   <style>

table.striped > tbody > tr:nth-child(odd) {
  background-color: rgba(170, 213, 213, 0.5);
}

</style>
<script>
$(document).ready(function(){ /* ... */
	$("#value").maskMoney({
	    decimal: ",",
	    thousands: ".",
	    numeralMaxLength: true
	});
	
	});


</script>
    <link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
	rel="stylesheet">
	   <style>
	   textarea, input {
  padding:10px;
	font-family: FontAwesome, "Open Sans", Verdana, sans-serif;
    font-style: normal;
    font-weight: normal;
    text-decoration: inherit;
}
table {
    
    margin: 2em auto;
}



td {
   
    padding: 0.3em;
}

tbody {
    background: #ccc;
}

tbody tr td{
 background-color: white;
 border: 4px solid white;
}

div.pager {
    text-align: center;
    margin: 1em 0;
}


div.pager span {
    display: inline-block;
    width: 1.8em;
    height: 1.8em;
    line-height: 1.8;
    text-align: center;
    cursor: pointer;
    background: #000;
    color: #fff;
    margin-right: 0.5em;
}

div.pager span.active {
    background: #c00;
}

th{
	
}

th a {
  color: #000;
}
th a:hover {
  color: #000;
  text-decoration: underline;
}

.dynatable-search {
  float: right;
  margin-bottom: 10px;
}

.dynatable-pagination-links {
  float: right;
}

.dynatable-record-count {
  display: block;
  padding: 5px 0;
}

.dynatable-pagination-links span,
.dynatable-pagination-links li {
  display: inline-block;
}

.dynatable-page-link,
.dynatable-page-break {
  display: block;
  padding: 5px 7px;
}

.dynatable-page-link {
  cursor: pointer;
}

.dynatable-active-page,
.dynatable-disabled-page {
  cursor: text;
}
.dynatable-active-page:hover,
.dynatable-disabled-page:hover {
  text-decoration: none;
}

.dynatable-active-page {
  background: #71AF5A;
  border-radius: 5px;
  color: #fff;
}
.dynatable-active-page:hover {
  color: #fff;
}
.dynatable-disabled-page,
.dynatable-disabled-page:hover {
  background: none;
  color: #999;
}
.dynatable-search{
	float: left;
}
.dynatable-search {
	margin-bottom: 0;
}




   

</style>

  
    <script th:inline="javascript">
    /*<![CDATA[*/
  idremocao = 0;
    
  function zerarform(){
	  document.getElementById("value").style.border = null;
	  document.getElementById("name").style.border = null;
	$('#name').val("");
	$('#value').val("");

}
 	function validateMyForm(){
		  return false;
		}
 	
 	function editarOpcao(id){
 		 $(window).scrollTop(0);
 		document.getElementById("name").value =  document.getElementById('Name'+id).innerText;
 		document.getElementById("value").value =  document.getElementById('Value'+id).innerText;
 	 }
 
    function deleteButton(){
    	id = idremocao;
    	
    	$.ajax({
	   	    type : "GET",
	   	    url : "/deletbutton",
	   	    data : {
	   	    "id" : id
	   	    },
	   	    success: function(){
	   	    	var link = "http://localhost:8090/manager/botoes?show=true";
	   	    	$(location).attr('href',link); 
	   	    	
	   	    }
	   	});
    }
    function removeBotao(id){
    	idremocao = id;
    	$('#modal1').modal('open');
    }
    
    
    	function enviarform(e){
	    		var newdois = '';
				z = document.getElementById("value").value.split('.').join(newdois);	
				z = z.split(',').join(".");	
				document.getElementById("value").value = z;
    		    if (document.getElementById("name").value === "" && document.getElementById("value").value === ""){
    		 
    		    	document.getElementById("name").style.border = "thick solid red";
    		    	document.getElementById("value").style.border = "thick solid red";
    		    }
    		    else if (document.getElementById("name").value === ""){
    		    	document.getElementById("value").style.border = null;
    		    	document.getElementById("name").style.border = "thick solid red";
    		    }
    		    else if (document.getElementById("value").value === ""){
    		    	document.getElementById("name").style.border = null;
    		    	document.getElementById("value").style.border = "thick solid red";
    		    }  	
    		    else if (document.getElementById("name").value != "" && document.getElementById("value").value != ""){
    		    	 return true; 
    		    }
    		    e.preventDefault();
    		    return false; 
    	   	}
    $(document).ready(function() {		
    	 var mostrar = /*[[${mostrar}]]*/ 'default';
    	 if(mostrar != null && mostrar.valueOf()  != 'default' ){
    			 $('#modal2').modal('open');
		  }
    	 if (window.location.href == "http://localhost:8090/manager/botoes?show=true"){
	   	     	$('#modaldeletar').modal('open');
    	 }
    	   		
    });
    /*]]>*/
    </script>
    
    <style>
table {
    border-collapse: separate !important;
}
th, td {
    padding: 0;
}
td i{
	 
}
</style>
</head>
<body>

    <main layout:fragment="content">
      <div class="row">
 
        <article class="container" >
            <div class="row">
		    	 <h3 style="margin-bottom: 0px;" >CONTROLE OPÇÕES</h3>
		    	 
		         <hr  class="col s6  style-eight" >
    		</div>
    		
    		<div class="row"  style="padding-top: 3%;">
		    	 <h5 style="margin-bottom: 0px; padding-bottom: 0.7%;" >CADASTRAR OPÇÔES</h5>
		    	 <hr style="" class="col s4  style-eight" >
    		</div>
    		<div class="col-sm-9">
						  <button class="myButton btn waves-effect waves-light" onclick="zerarform();"  style="float:left; color: black; margin-bottom: 20px;" type="button" name="action">Novo
						    <i class="material-icons right">add</i>
						 </button>
            <section class=" col s12">
            <form autocomplete="off" action="#" th:action="@{/manager/botoes/novo}" method="post" th:object="${button}" role="form">
					<div class="form-group">
						<div class="col-sm-9">
						
						<input type="text" th:field="*{name}" id="name" placeholder="Nome"
								class="form-control" /> 
						</div>
					</div>
					
					<div class="form-group">
						<div class="col-sm-9">
						<input type="text" th:field="*{value}" id="value" maxlength="7" placeholder="Valor"
								class="form-control" /> 
						</div>
					</div>
					<div class="row" style="margin-top: 3%;">
					<div class="form-group" style="margin-top: 40px;">
						
						  
						  
						  <button class="btn waves-effect waves-light"  onclick="enviarform(event);" style="float:right;  color: black;" type="submit" name="action">Cadastrar
						    <i class="material-icons right">send</i>
						  </button>
					</div>
					</div>
				</form>
           
				






            </section>
 <section  class = "col s12">
<div class="row"  style="padding-top: 3%;">
		    	 <h5 style="margin-bottom: 0px; padding-bottom: 0.7%;" >LISTAR OPÇÕES</h5>
		    	 <hr style="" class="col s3  style-eight" >
    		</div>
   <table th:if="${buttons != null}" border="1" id="my-table" class="highlight" >
    <thead>
        <tr >
       	    <th class="center">Nome</th>
            <th class="center">Valor</th>
            <th class="center">Ação</th>
        </tr>
    </thead>
    <tbody >
    	<tr th:each="b: ${buttons}">
    	
 
    	<span  style="display: none;" class="truncate" th:text="${b.getId()}"  th:id="${b.getId()}" ></span>
    		<td><span class="truncate"  th:text="${b.getName()}" th:id="Name  + ${b.id}" ></span></td>
	    	<td><span class="truncate"  th:id="Value  + ${b.id}"   th:text="${b.getValue()}" ></span></td>
	    	<td > 
	    	
	    	
	    	<a  th:onclick="'javascript:editarOpcao(' + ${b.id} +');'"   style="cursor: pointer;"  ><i  class="material-icons center ">edit</i>
           </a>
            <a style="margin-left: 30px; cursor: pointer;" class="modal-trigger"  th:onclick="'javascript:removeBotao(' + ${b.id} +');'"  >
              
			 		
             <i style="color: red; " class="material-icons center">delete</i> </a>   </td>
    	</tr>
      
    </tbody>
</table>




            </section>
        </article>
        </div>
    		
        <article class="container" style="padding-top: 3%;">





<div id="modal2" class="modal" style=" width: 25% !important ; height: 40% !important ;  overflow-y: hidden !important ;">
  <div class="row">
  <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat" style="float:right;">X</a>
  </div>
  <div class="row">
  	<div class="col s4 offset-s4">
  	 <i class="material-icons" style="font-size: 80px; color: #1b5e20;">done</i>
  	</div>
  	  <div class="col s11 offset-s1">
  	<p >Botao cadastrado com sucesso!</p>
  	</div>
  </div>
  <div class="modal-footer"> 
      <a href="#!"  style="font-size: 22px; color: blue;" class=" modal-action modal-close waves-effect waves-green btn-flat">Ok</a>
    </div>							
</div> 

<div id="modaldeletar" class="modal" style=" width: 25% !important ; height: 40% !important ;  overflow-y: hidden !important ;">
  <div class="row">
  <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat" style="float:right;">X</a>
  </div>
  <div class="row">
  	<div class="col s4 offset-s4">
  	 <i class="material-icons" style="font-size: 80px; color: #1b5e20;">done</i>
  	</div>
  	  <div class="col s11 offset-s1">
  	<p >Botao deletado com sucesso!</p>
  	</div>
  </div>
   <div class="modal-footer"> 
      <a href="#!"  style="font-size: 22px; color: blue;" class=" modal-action modal-close waves-effect waves-green btn-flat">Ok</a>
    </div>
    							
</div> 


<div id="modal3" class="modal" style=" width: 35% !important ; height: 40% !important ;  overflow-y: hidden !important ;" >
  <div class="row">
  <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat" style="float:right;">X</a>
  </div>
  <div class="row">
  	<div class="col s4 offset-s5">
  	 <i class="material-icons" style="font-size: 480%; color: red;">error_outline</i>
  	</div>
  	  <div class="col s11 offset-s1">
  	<p>Botao nao cadastrado. Verifique os campos informados</p>
  	</div>
  </div>
  <div class="modal-footer"> 
      <a href="#!"  style="font-size: 22px; color: blue;" class=" modal-action modal-close waves-effect waves-green btn-flat">Ok</a>
    </div>							
</div>  

<div id="modal4" class="modal" style=" width: 25% !important ; height: 30% !important ;  overflow-y: hidden !important ;">
 	
  <div class="row">
  <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat" style="float:right;">X</a>
  </div>
  <form autocomplete="off" action="#" th:action="@{/manager/botoes/editar}" method="post" th:object="${button}" role="form">
  <div class="row">
  <input id="aux" value="" style= "display: none;"/>
  	<div class="col s12">
  		<table  cellspacing="0" cellpadding="0">
  			<tr>
  				<td ><i class="material-icons">comment</i></td>
  				<td><input id="editname" value="" /></td>
  			</tr>
  			<tr>
  				<td><i class="material-icons">attach_money</i></td>
  				<td><input id="editvalue" value="" /></td>
  			</tr>
  			
  		</table>
  		
  		 
  		 
  	</div>
  	
  </div>
  
 </form>								
</div> 


<div id="modal5" class="modal" style=" width: 25% !important ; height: 30% !important ;  overflow-y: hidden !important ;">
  <div class="row">
  <a href="#!" id="fechar1" class=" modal-action modal-close waves-effect waves-green btn-flat" style="float:right;">X</a>
  </div>
  <div class="row">
  	<div class="col s4 offset-s4">
  	 <i class="material-icons" style="font-size: 80px; color: #1b5e20;">done</i>
  	</div>
  	  <div class="col s11 offset-s1">
  	<p >Botao editado com sucesso!</p>
  	</div>
  </div>							
</div> 

 <!-- Modal Structure -->
  <div id="modal1" class="modal" style="width: 620px;">
   <a href="#!" style="float: right;" class=" modal-action modal-close btn-flat">X</a>
    
    <div class="modal-content">
      <h4 style="font-weight: bold;">Confirmar exclusão da opção ?</h4>
      <p>Tem certeza que deseja excluir essa opção de consumo?</p>
      <p>Essa informação não poderá ser recuperada mais.</p>
    </div>
    <div class="modal-footer"> 
      <a href="#!" onclick="deleteButton();" style="font-size: 22px; color: blue;" class=" modal-action modal-close waves-effect waves-green btn-flat">Sim</a>
    </div>
    
  </div>
   
            
        </article>
    </main>
</body>

</html>
